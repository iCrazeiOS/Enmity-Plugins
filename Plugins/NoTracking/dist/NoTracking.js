function w(i){window.enmity.plugins.registerPlugin(i)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const u=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native,window.enmity.modules.common.React,window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function a(i){return window.enmity.patcher.create(i)}var r="NoTracking",y="1.1.1",p="Remove tracking parameters from links you send",g=[{name:"iCraze",id:"883412614699446283"}],h={name:r,version:y,description:p,authors:g};const c=a("no-tracking");function v(i){let m={},s=i.replace(/.*?\?/,"").split("&");for(let t in s){let n=s[t].split("=")[0];!n.length||(typeof m[n]=="undefined"&&(m[n]=[]),m[n].push(s[t].split("=")[1]))}return m}const f={...h,onStart(){c.before(u,"sendMessage",(i,m,s)=>{var t;let n=m[1].content;const l=/(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/g;(t=n.match(l))==null||t.forEach(e=>{let o;if(e.includes("twitter.com/"))o=e.split("t=")[0].split("s=")[0];else if(e.includes("reddit.com/"))o=e.replace(/utm_medium(=[^&]*)?|^utm_medium(=[^&]*)?&?/g,""),o=o.replace(/utm_source(=[^&]*)?|^utm_source(=[^&]*)?&?/g,""),o=o.replace(/utm_name(=[^&]*)?|^utm_name(=[^&]*)?&?/g,""),o=o.replace("&&",""),o=o.replace("?&","?"),o.endsWith("&")&&(o=o.slice(0,-1));else if(e.includes("ebay.co")){o=e.split("?")[0];let d=v(e);d._nkw&&(o+="?_nkw="+d._nkw)}else(e.includes("soundcloud.com/")||e.includes("instagram.com/"))&&(o=e.split("?")[0]);o&&(o.endsWith("?")&&(o=o.slice(0,-1)),n=n.replace(e,o))}),m[1].content=n})},onStop(){c.unpatchAll()}};w(f);

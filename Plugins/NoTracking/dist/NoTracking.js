function r(l){window.enmity.plugins.registerPlugin(l)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const y=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native,window.enmity.modules.common.React,window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function p(l){return window.enmity.patcher.create(l)}var g="NoTracking",h="1.1.3",f="Remove tracking parameters from links you send",v=[{name:"iCraze",id:"883412614699446283"}],k={name:g,version:h,description:f,authors:v};const u=p("no-tracking");function w(l){let t={},c=l.replace(/.*?\?/,"").split("&");for(let d in c){let i=c[d].split("=")[0];!i.length||(typeof t[i]=="undefined"&&(t[i]=[]),t[i].push(c[d].split("=")[1]))}return t}const _={...k,onStart(){u.before(y,"sendMessage",(l,t,c)=>{var d;let i=t[1].content;const a=/(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])/g;(d=i.match(a))==null||d.forEach(o=>{let e;if(o.match(/http(s)?:\/\/(www\.)?(twitter\.com|x\.com)\//gi))e=o.split("t=")[0].split("s=")[0];else if(o.includes("reddit.com/"))e=o.replace(/utm_medium(=[^&]*)?|^utm_medium(=[^&]*)?&?/g,""),e=e.replace(/utm_source(=[^&]*)?|^utm_source(=[^&]*)?&?/g,""),e=e.replace(/utm_name(=[^&]*)?|^utm_name(=[^&]*)?&?/g,""),e=e.replace("&&",""),e=e.replace("?&","?"),e.endsWith("&")&&(e=e.slice(0,-1));else if(o.includes("ebay.co")){e=o.split("?")[0];let n=w(o);n._nkw&&(e+="?_nkw="+n._nkw)}else if(o.includes("soundcloud.com/"))e=o.split("?")[0];else if(o.includes("instagram.com/"))e=o.split("?")[0];else if(o.includes("youtube.com/")){e=o.split("?")[0];let n=w(o);n.si&&delete n.si;let s="";for(let m in n)m==Object.keys(n)[Object.keys(n).length-1]?s+=m+"="+n[m][0]:s+=m+"="+n[m][0]+"&";e+="?"+s}else if(o.includes("youtu.be/")){e=o.split("?")[0];let n=w(o);n.si&&delete n.si;let s="";for(let m in n)m==Object.keys(n)[Object.keys(n).length-1]?s+=m+"="+n[m][0]:s+=m+"="+n[m][0]+"&";e+="?"+s}e&&(e.endsWith("?")&&(e=e.slice(0,-1)),i=i.replace(o,e))}),t[1].content=i})},onStop(){u.unpatchAll()}};r(_);
